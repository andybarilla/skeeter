---
id: US-014
title: Add comprehensive test coverage for core packages
status: done
priority: critical
assignee: opencode
tags: [testing, quality]
created: "2026-02-20"
updated: "2026-02-20"
---

## Acceptance Criteria

- [x] Add tests for internal/config package
- [x] Add tests for internal/llm package (mock CLI execution)
- [x] Add tests for internal/resolve package
- [x] Add tests for all CLI commands in cmd/skeeter
- [x] Add integration tests for GitHub store (using mocks)
- [x] Achieve 70%+ code coverage
- [x] Add coverage reporting to CI

## Context

Current coverage is ~30%. Focus on edge cases, error paths, and store interface compliance.

## Implementation Notes

Added test files:
- internal/config/config_test.go (96.6% coverage)
- internal/resolve/resolve_test.go (92.0% coverage)
- internal/llm/llm_test.go (81.4% coverage)
- internal/id/id_test.go (improved to 95.7%)
- internal/store/filesystem_test.go (improved)
- internal/store/github_test.go (new, mocked HTTP)
- cmd/skeeter/commands_test.go (51.7% coverage)

Total coverage (internal + cli): 76.0%

Also fixed:
- Added baseURL field to GitHubStore for testability
- Changed next command to return error instead of os.Exit(1) for testability
- Added ErrNoTasksAvailable error type
